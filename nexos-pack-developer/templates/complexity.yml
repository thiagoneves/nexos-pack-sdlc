# Complexity Assessment
# Generated by @architect during Spec Pipeline — Phase 2: Assess
# Input for: spec-write-spec (determines pipeline depth)

meta:
  story_id: "{epicNum}.{storyNum}"
  generated_by: "@architect"
  date: "{date}"
  requirements_ref: "docs/stories/{storyId}/spec/requirements.yml"

# -------------------------------------------------------------------
# 5 Complexity Dimensions (scored 1-5 each)
# -------------------------------------------------------------------

dimensions:
  scope:
    score: "{1-5}"
    rationale: "{why this score — number of files, modules, layers affected}"
    details:
      files_estimated: "{count}"
      modules_affected: "{list}"
      layers: "{frontend | backend | database | infrastructure | etc.}"

  integration:
    score: "{1-5}"
    rationale: "{external APIs, third-party services, message queues}"
    details:
      external_apis: "{count and names}"
      internal_services: "{count and names}"
      data_formats: "{JSON, XML, GraphQL, etc.}"

  infrastructure:
    score: "{1-5}"
    rationale: "{CI/CD changes, new services, environment config}"
    details:
      new_services: "{count}"
      config_changes: "{list}"
      migration_required: "{yes/no}"

  knowledge:
    score: "{1-5}"
    rationale: "{team familiarity with the domain, tech stack, patterns}"
    details:
      new_technologies: "{list if any}"
      domain_complexity: "{well-known | emerging | novel}"
      documentation_available: "{yes/no}"

  risk:
    score: "{1-5}"
    rationale: "{criticality, data sensitivity, blast radius of failure}"
    details:
      data_sensitivity: "{none | low | medium | high | critical}"
      user_impact: "{none | low | medium | high}"
      rollback_difficulty: "{easy | moderate | hard}"

# -------------------------------------------------------------------
# Classification
# -------------------------------------------------------------------

total_score: "{sum of 5 dimensions, max 25}"

# SIMPLE (<=8) | STANDARD (9-15) | COMPLEX (>=16)
class: "{SIMPLE | STANDARD | COMPLEX}"

# -------------------------------------------------------------------
# Pipeline Recommendation
# -------------------------------------------------------------------

recommended_phases:
  # SIMPLE:   gather → spec → critique (3 phases)
  # STANDARD: gather → assess → research → spec → critique (5 phases)
  # COMPLEX:  all 5 phases + revision cycle
  phases: "{list of recommended phases}"
  skip_rationale: "{why certain phases can be skipped, if applicable}"

# -------------------------------------------------------------------
# Notes
# -------------------------------------------------------------------

notes: "{additional observations about complexity, gotchas, or recommendations}"
