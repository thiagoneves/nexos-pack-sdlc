# QA Gate Result
# Generated by @qa during quality review

storyId: "{epicNum}.{storyNum}"
storyTitle: "{title}"
reviewer: "@qa"
date: "{date}"
iteration: 1

# Verdict: PASS | CONCERNS | FAIL | WAIVED
verdict: "{verdict}"

# Score: number of checks passed out of 7
score: "{passed}/7"

# 7 Quality Checks
checks:
  code_review:
    status: "{PASS | FAIL}"
    notes: "{patterns, readability, maintainability}"
  unit_tests:
    status: "{PASS | FAIL}"
    coverage: "{percentage}"
    notes: "{test quality, edge cases covered}"
  acceptance_criteria:
    status: "{PASS | FAIL}"
    notes: "{which ACs met/unmet, with references}"
    details:
      # - ac: "AC-1"
      #   met: true
      #   notes: "{verification details}"
  no_regressions:
    status: "{PASS | FAIL}"
    notes: "{existing functionality preserved?}"
    tests_run: "{number of existing tests that passed}"
  performance:
    status: "{PASS | FAIL}"
    notes: "{within acceptable limits?}"
    metrics:
      # response_time: "{ms}"
      # memory_usage: "{MB}"
  security:
    status: "{PASS | FAIL}"
    notes: "{OWASP basics verified?}"
    checks_performed:
      # - "{injection checks}"
      # - "{auth checks}"
  documentation:
    status: "{PASS | FAIL}"
    notes: "{docs updated if needed?}"

# Issues found (empty list if PASS with no issues)
issues:
  # - id: "ISSUE-1"
  #   severity: critical | high | medium | low
  #   category: code | tests | requirements | performance | security | docs
  #   description: "{what is wrong}"
  #   location: "{file:line or component}"
  #   recommendation: "{how to fix}"
  #   ac_reference: "{which AC is affected, if applicable}"

# Previous iteration reference (for QA Loop, iteration > 1)
# previous_iteration:
#   date: "{date}"
#   verdict: "{previous verdict}"
#   issues_resolved: [{list of resolved issue IDs}]
#   issues_remaining: [{list of still-open issue IDs}]

# Waiver (only if verdict is WAIVED)
# waiver:
#   authority: "{who approved the waiver}"
#   reason: "{justification for waiving}"
#   conditions: "{any conditions attached}"
#   expires: "{date or 'permanent'}"

# Summary
summary: "{1-2 sentence overall assessment}"

# Recommendations (even on PASS, note improvements for future)
# recommendations:
#   - "{suggestion for code quality improvement}"
#   - "{technical debt to address later}"

# Next action based on verdict:
# PASS     → @devops pushes, story status → Done
# CONCERNS → @devops pushes, observations documented as tech debt
# FAIL     → return to @dev with issues list, enter QA Loop
# WAIVED   → @devops pushes, waiver logged in change log
